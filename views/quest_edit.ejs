<%- include("partials/header") %>

<div class="login-container">
  <div class="login-box">
    <h2>Edit Quest</h2>
    <p class="login-subtitle">Update your quest details</p>

    <% if (error) { %>
      <p class="login-error"><%= error %></p> <!-- ✅ Visar backend-valideringsfel -->
    <% } %>

    <form action="/quests/<%= quest.id %>/update" method="POST">
      <div class="input-box">
        <label for="title">Title</label>
        <input id="title" type="text" name="title" class="input-field" value="<%= quest.title %>">
      </div>

      <div class="input-box">
        <label for="description">Description</label>
        <textarea id="description" name="description" class="input-field" rows="3"><%= quest.description || '' %></textarea>
      </div>

      <div class="input-box">
        <label for="type">Type</label>
        <select id="type" name="type" class="input-field">
          <option value="daily" <%= quest.type === "daily" ? "selected" : "" %>>Daily</option>
          <option value="once" <%= quest.type === "once" ? "selected" : "" %>>One time</option>
          <option value="weekly" <%= quest.type === "weekly" ? "selected" : "" %>>Weekly</option>
        </select>
      </div>

      <div class="input-box">
        <label for="due_at">Due Date</label>
        <input
          id="due_at"
          type="date"
          name="due_at"
          class="input-field"
          value="<%= quest.due_at || '' %>"> 
      </div>

      <div class="input-submit">
        <button type="submit" class="submit_knapp">Save Changes</button>
      </div>
    </form>

    <div class="sign-up-link">
      <p><a href="/dashboard">← Back to Dashboard</a></p>
    </div>
  </div>
</div>

<%- include("partials/footer") %>
